<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Overview &#8212; mnefun 0.2.0.dev0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/default.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="python_reference.html" />
    <link rel="prev" title="mnefun" href="index.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

<link href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  </head><body>

  <div id="navbar" class="('navbar',) navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/ilabs.png"></span>
          mnefun</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2.0.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="#">Overview</a></li>
                <li><a href="python_reference.html">API reference</a></li>
                <li><a href="whats_new.html">What's new</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html"> <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="whats_new.html">What’s new</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="overview">
<span id="id1"></span><h1><a class="toc-backref" href="#id3">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">mnefun</span></code> is designed to streamline ILABS data processing by automating and
standardizing data retrieval, remote machine processing (MaxFilter),
preprocessing steps, and inverse computation.</p>
<p>A critical idea is that, once an experiment is complete, <strong>you or another ILABS
person should be able to run your analysis script once, from scratch, for all
subjects</strong>, and end up with all of the basic preprocessed files (evoked,
epochs, inverse, etc.) you will need for your downstream scripts used for
publication (stats, etc.).</p>
<p>To achieve <code class="docutils literal notranslate"><span class="pre">mnefun</span></code>’s reproducibility goal, <strong>it is important
not to run your processing script by changing parameters for different
subjects as you process each of them, or by doing steps manually</strong>.
Where subject-specific values are needed, we can add functionality to allow
subject-specific values in the script itself, such as <code class="docutils literal notranslate"><span class="pre">proj_nums</span></code>
(see below).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The one step that might (somewhat routinely) need to be “worked around” is
the data fetching step, which requires that the files on the acquisition
machine be named properly, which might not always be the case, for example
when:</p>
<ul class="simple">
<li><p>files are named incorrectly (typos, inconsistently) during acquisition</p></li>
<li><p>runs are re-executed and saved with a different name
(e.g., <code class="docutils literal notranslate"><span class="pre">_redo_raw.fif</span></code>).</p></li>
</ul>
<p>But this should ideally be the exception and not the rule.</p>
</div>
<p>Experiment parameters can be specified using a <code class="docutils literal notranslate"><span class="pre">params</span> <span class="pre">=</span> <span class="pre">Params(...)</span></code> call in
a script (old way), or by specifying a YAML script with the experiment
parameters (new way) and using <a class="reference internal" href="generated/mnefun.read_params.html#mnefun.read_params" title="mnefun.read_params"><code class="xref py py-func docutils literal notranslate"><span class="pre">mnefun.read_params()</span></code></a> to load the
parameters. The processing pipeline steps and relationships are given below.
All YAML parameters are described in their appropriate sections.
Consider looking at <code class="docutils literal notranslate"><span class="pre">mnefun/examples/funloc</span></code> directory for a canonical
example of how to process data using mnefun.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id3">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#flow-chart" id="id4">Flow chart</a></p></li>
<li><p><a class="reference internal" href="#running-parameters" id="id5">Running parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#general-general-options" id="id6"><code class="docutils literal notranslate"><span class="pre">general</span></code>: General options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fetch-raw" id="id7">1. fetch_raw</a></p>
<ul>
<li><p><a class="reference internal" href="#fetch-raw-raw-fetching-parameters" id="id8"><code class="docutils literal notranslate"><span class="pre">fetch_raw</span></code>: Raw fetching parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#do-score" id="id9">2. do_score</a></p>
<ul>
<li><p><a class="reference internal" href="#scoring-scoring-parameters" id="id10"><code class="docutils literal notranslate"><span class="pre">scoring</span></code>: Scoring parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#do-sss" id="id11">3. do_sss</a></p>
<ul>
<li><p><a class="reference internal" href="#preprocessing-multithreading-multithreading-parameters" id="id12"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">multithreading</span></code>: Multithreading parameters</a></p></li>
<li><p><a class="reference internal" href="#preprocessing-pre-sss-bads-automatic-bad-channel-detection" id="id13"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">pre-SSS</span> <span class="pre">bads</span></code>: Automatic bad channel detection</a></p></li>
<li><p><a class="reference internal" href="#preprocessing-head-position-estimation-head-position-estimation-parameters" id="id14"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">head_position_estimation</span></code>: Head position estimation parameters</a></p></li>
<li><p><a class="reference internal" href="#preprocessing-annotations-annotation-parameters" id="id15"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">annotations</span></code>: Annotation parameters</a></p></li>
<li><p><a class="reference internal" href="#preprocessing-sss-sss-parameters" id="id16"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">sss</span></code>: SSS parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#do-ch-fix" id="id17">4. do_ch_fix</a></p></li>
<li><p><a class="reference internal" href="#gen-ssp" id="id18">5. gen_ssp</a></p>
<ul>
<li><p><a class="reference internal" href="#preprocessing-filtering-filtering-parameters" id="id19"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">filtering</span></code>: Filtering parameters</a></p></li>
<li><p><a class="reference internal" href="#preprocessing-post-sss-bads-marking-bad-channels-during-ssp" id="id20"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">post-SSS</span> <span class="pre">bads</span></code>: Marking bad channels during SSP</a></p></li>
<li><p><a class="reference internal" href="#preprocessing-ssp-ssp-creation-parameters" id="id21"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">ssp</span></code>: SSP creation parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#apply-ssp" id="id22">6. apply_ssp</a></p></li>
<li><p><a class="reference internal" href="#write-epochs" id="id23">7. write_epochs</a></p>
<ul>
<li><p><a class="reference internal" href="#epoching-epoching-parameters" id="id24"><code class="docutils literal notranslate"><span class="pre">epoching</span></code>: Epoching parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gen-covs" id="id25">8. gen_covs</a></p>
<ul>
<li><p><a class="reference internal" href="#covariance-covariance-parameters" id="id26"><code class="docutils literal notranslate"><span class="pre">covariance</span></code>: Covariance parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gen-fwd" id="id27">9. gen_fwd</a></p>
<ul>
<li><p><a class="reference internal" href="#forward-forward-parameters" id="id28"><code class="docutils literal notranslate"><span class="pre">forward</span></code>: Forward parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gen-inv" id="id29">10. gen_inv</a></p>
<ul>
<li><p><a class="reference internal" href="#inverse-inverse-parameters" id="id30"><code class="docutils literal notranslate"><span class="pre">inverse</span></code>: Inverse parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#gen-report" id="id31">11. gen_report</a></p>
<ul>
<li><p><a class="reference internal" href="#report-params-report-parameters" id="id32"><code class="docutils literal notranslate"><span class="pre">report_params</span></code>: Report parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#filename-standardization" id="id33">Filename standardization</a></p>
<ul>
<li><p><a class="reference internal" href="#naming-file-naming-tags-and-folders" id="id34"><code class="docutils literal notranslate"><span class="pre">naming</span></code>: File naming tags and folders</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#preparing-your-machine-for-maxfilter-use" id="id35">Preparing your machine for MaxFilter use</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="flow-chart">
<h2><a class="toc-backref" href="#id4">Flow chart</a><a class="headerlink" href="#flow-chart" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><object data="_images/graphviz-ca50620b7a6e3408d136d520f3ddbcd47825b51c.svg" type="image/svg+xml" class="graphviz">
<p class="warning">strict digraph &quot;mnefun flow diagram&quot; {
	graph [bb=&quot;0,0,558.5,869&quot;,
		bgcolor=&quot;#00000000&quot;,
		nodesep=0.2,
		ranksep=0.1
	];
	node [fontname=&quot;sans-serif&quot;,
		fontsize=8,
		label=&quot;\N&quot;,
		margin=&quot;0.1,0.05&quot;,
		shape=box
	];
	edge [fontname=&quot;sans-serif&quot;,
		fontsize=8
	];
	{
		graph [rank=same];
		htm		 [fillcolor=&quot;#66CCEE&quot;,
			fontcolor=&quot;#000000&quot;,
			height=0.5,
			label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;subj_fil*_report.html&lt;/FONT&gt;&gt;,
			pos=&quot;233.5,44&quot;,
			style=filled,
			width=1.5833];
		legend		 [height=1.2222,
			label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;0&quot; CELLSPACING=&quot;4&quot; CELLPADDING=&quot;4&quot;&gt;&lt;TR&gt;&lt;TD BGCOLOR=&quot;#CCBB44&quot;&gt;    &lt;/TD&gt;&lt;TD ALIGN=&quot;left&quot;&gt;Remote: acquisiton machine&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD BGCOLOR=&quot;#EE6677&quot;&gt;    &lt;/TD&gt;&lt;TD ALIGN=&quot;left&quot;&gt;Local: obligatory user-created files&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD BGCOLOR=&quot;#FFD8DF&quot;&gt;    &lt;/TD&gt;&lt;TD ALIGN=&quot;left&quot;&gt;Local: optional user-created files&lt;/TD&gt;&lt;/TR&gt;&lt;TR&gt;&lt;TD BGCOLOR=&quot;#66CCEE&quot;&gt;    &lt;/TD&gt;&lt;TD ALIGN=&quot;left&quot;&gt;Local: pipeline-created files&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&gt;,
			margin=0,
			pos=&quot;399.5,44&quot;,
			shape=plaintext,
			width=2.625];
	}
	sco	 [fillcolor=&quot;#EE6677&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;score.py&lt;/FONT&gt;&gt;,
		pos=&quot;76.5,691&quot;,
		style=filled,
		width=0.77778];
	lst	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/lists/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;ALL_*-eve.lst&lt;/FONT&gt;&gt;,
		pos=&quot;39.5,603&quot;,
		style=filled,
		width=1.0972];
	sco -&gt; lst	 [URL=&quot;../overview.html#do-score&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;2. do_score&lt;/B&gt;&gt;,
		labeltooltip=&quot;2. do_score&quot;,
		lp=&quot;78.5,647&quot;,
		pos=&quot;e,38.161,621.11 52.039,672.88 49.892,670.44 47.977,667.81 46.5,665 41.108,654.76 38.998,642.26 38.369,631.18&quot;,
		target=_top];
	evo	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/inverse/, ./SUBJ/epochs/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-evo.fif, *-epo.fif&lt;/FONT&gt;&gt;,
		pos=&quot;120.5,186&quot;,
		style=filled,
		width=2.0139];
	lst -&gt; evo	 [fontsize=10,
		pos=&quot;e,72.913,204.17 39.5,584.8 39.5,567 39.5,539.14 39.5,515 39.5,515 39.5,515 39.5,249 39.5,232.17 50.528,219.18 64.446,209.5&quot;];
	evo -&gt; htm	 [URL=&quot;../overview.html#gen-report&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;11. gen_report&lt;/B&gt;&gt;,
		labeltooltip=&quot;11. gen_report&quot;,
		lp=&quot;192,123&quot;,
		pos=&quot;e,200.77,62.2 124.33,167.81 128.69,150.37 137.13,123.96 151.5,105 162.52,90.459 177.91,77.758 192.39,67.765&quot;,
		target=_top];
	mri	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;structural/mri/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;T1.mgz&lt;/FONT&gt;&gt;,
		pos=&quot;450.5,312&quot;,
		style=filled,
		width=1.0417];
	bem	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;structural/bem/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-bem-sol.fif&lt;/FONT&gt;&gt;,
		pos=&quot;518.5,249&quot;,
		style=filled,
		width=1.1111];
	mri -&gt; bem	 [fontsize=10,
		label=Freesurfer,
		labeltooltip=Freesurfer,
		lp=&quot;513,280.5&quot;,
		pos=&quot;e,498.64,267.4 470.17,293.78 476.74,287.69 484.18,280.8 491.22,274.28&quot;];
	tra	 [fillcolor=&quot;#EE6677&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/trans/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-trans.fif&lt;/FONT&gt;&gt;,
		pos=&quot;336.5,249&quot;,
		style=filled,
		width=0.94444];
	mri -&gt; tra	 [fontsize=10,
		label=&quot;mne coreg&quot;,
		labeltooltip=&quot;mne coreg&quot;,
		lp=&quot;409.5,280.5&quot;,
		pos=&quot;e,358.11,267.02 412.73,299.6 402.95,295.78 392.6,291.19 383.5,286 379.68,283.82 373.23,279.02 366.31,273.58&quot;];
	src	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;structural/bem/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-src.fif&lt;/FONT&gt;&gt;,
		pos=&quot;424.5,249&quot;,
		style=filled,
		width=1.1111];
	mri -&gt; src	 [fontsize=10,
		pos=&quot;e,434.86,267.26 445.28,293.69 443.88,289.26 442.25,284.47 439.04,276.82&quot;];
	fwd	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/forward/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-fwd.fif&lt;/FONT&gt;&gt;,
		pos=&quot;339.5,186&quot;,
		style=filled,
		width=1.0972];
	bem -&gt; fwd	 [fontsize=10,
		pos=&quot;e,379.22,199.06 478.28,233.5 475.99,232.64 473.72,231.81 471.5,231 444.29,221.09 413.68,210.62 388.8,202.27&quot;];
	tra -&gt; fwd	 [URL=&quot;../overview.html#gen-fwd&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;9. gen_fwd&lt;/B&gt;&gt;,
		labeltooltip=&quot;9. gen_fwd&quot;,
		lp=&quot;368,217.5&quot;,
		pos=&quot;e,338.62,204.4 337.37,230.78 337.61,225.73 337.88,220.12 338.14,214.63&quot;,
		target=_top];
	src -&gt; fwd	 [fontsize=10,
		pos=&quot;e,379.31,198.39 416.14,230.75 412.4,224.17 407.49,217.1 401.5,212 397.55,208.63 393.1,205.65 388.44,203.02&quot;];
	inv	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/inverse/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-inv.fif&lt;/FONT&gt;&gt;,
		pos=&quot;294.5,123&quot;,
		style=filled,
		width=1.0833];
	fwd -&gt; inv	 [URL=&quot;../overview.html#gen-inv&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;10. gen_inv&lt;/B&gt;&gt;,
		labeltooltip=&quot;10. gen_inv&quot;,
		lp=&quot;351,154.5&quot;,
		pos=&quot;e,307.64,141.4 326.48,167.78 322.51,162.21 318.05,155.97 313.75,149.95&quot;,
		target=_top];
	inv -&gt; htm	 [fontsize=10,
		pos=&quot;e,247.57,62.223 280.35,104.68 272.5,94.507 262.59,81.678 253.91,70.438&quot;];
	pbd	 [fillcolor=&quot;#EE6677&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/raw_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_prebad.txt&lt;/FONT&gt;&gt;,
		pos=&quot;245.5,735&quot;,
		style=filled,
		width=1.0417];
	mfb	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/raw_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_raw_maxbad.txt&lt;/FONT&gt;&gt;,
		pos=&quot;170.5,647&quot;,
		style=filled,
		width=1.4583];
	pbd -&gt; mfb	 [URL=&quot;../overview.html#do-sss&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;3. do_sss&lt;/B&gt;&gt;,
		labeltooltip=&quot;3. do_sss&quot;,
		lp=&quot;208.5,691&quot;,
		pos=&quot;e,169.64,665.2 207.9,726.39 198.38,722.53 189.02,716.97 182.5,709 174.85,699.64 171.56,686.84 170.3,675.31&quot;,
		target=_top];
	mfp	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/raw_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_raw.pos&lt;/FONT&gt;&gt;,
		pos=&quot;201.5,559&quot;,
		style=filled,
		width=1.0417];
	pbd -&gt; mfp	 [fontsize=10,
		pos=&quot;e,210.05,577.03 244.03,716.73 242.02,695.4 237.69,659.17 229.5,629 225.6,614.65 219.65,599.25 214.23,586.55&quot;];
	sss	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/sss_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_raw_sss.fif&lt;/FONT&gt;&gt;,
		pos=&quot;256.5,418&quot;,
		style=filled,
		width=1.0694];
	pbd -&gt; sss	 [fontsize=10,
		pos=&quot;e,266.45,436.07 255.66,716.73 264.36,699.35 275.5,672.18 275.5,647 275.5,647 275.5,647 275.5,471 275.5,462.38 273.25,453.42 270.29,\
445.36&quot;];
	mfb -&gt; mfp	 [fontsize=10,
		pos=&quot;e,195.09,577.21 176.92,628.77 181.2,616.61 186.91,600.41 191.75,586.68&quot;];
	mfb -&gt; sss	 [fontsize=10,
		pos=&quot;e,217.87,424.68 159.92,628.86 139.87,591.86 101.76,506.63 141.5,453 149.74,441.87 180.34,432.88 207.9,426.79&quot;];
	mfp -&gt; sss	 [fontsize=10,
		pos=&quot;e,250.08,436.17 209.22,540.95 215.19,526.87 223.57,506.77 230.5,489 236.05,474.77 241.93,458.81 246.68,445.63&quot;];
	aan	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/raw_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-annot.fif&lt;/FONT&gt;&gt;,
		pos=&quot;186.5,471&quot;,
		style=filled,
		width=1.0417];
	mfp -&gt; aan	 [fontsize=10,
		pos=&quot;e,189.6,489.21 198.39,540.77 196.34,528.73 193.61,512.72 191.29,499.08&quot;];
	sss -&gt; sss	 [URL=&quot;../overview.html#do-ch-fix&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;4. do_ch_fix&lt;/B&gt;&gt;,
		labeltooltip=&quot;4. do_ch_fix&quot;,
		lp=&quot;341.5,418&quot;,
		pos=&quot;e,295.19,413.3 295.19,422.7 303.22,422.21 309,420.64 309,418 309,416.68 307.56,415.63 305.11,414.84&quot;,
		target=_top];
	bad	 [fillcolor=&quot;#EE6677&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/bads/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_post-sss.txt&lt;/FONT&gt;&gt;,
		pos=&quot;189.5,365&quot;,
		style=filled,
		width=1.1389];
	sss -&gt; bad	 [fontsize=10,
		pos=&quot;e,212.37,383.09 233.44,399.76 229.18,396.39 224.68,392.83 220.23,389.31&quot;];
	pca	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/sss_pca_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_fil55_raw_sss.fif&lt;/FONT&gt;&gt;,
		pos=&quot;234.5,249&quot;,
		style=filled,
		width=1.4306];
	sss -&gt; pca	 [fontsize=10,
		pos=&quot;e,286.07,264.24 295.26,412.45 313.09,407.75 332.65,399.05 343.5,383 352.46,369.74 347.6,362.47 343.5,347 334.07,311.4 330.45,298.98 \
302.5,275 300.13,272.97 297.59,271.08 294.92,269.34&quot;];
	pro	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/sss_pca_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-proj.fif&lt;/FONT&gt;&gt;,
		pos=&quot;223.5,312&quot;,
		style=filled,
		width=1.2778];
	sss -&gt; pro	 [URL=&quot;../overview.html#gen-ssp&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;5. gen_ssp&lt;/B&gt;&gt;,
		labeltooltip=&quot;5. gen_ssp&quot;,
		lp=&quot;112,365&quot;,
		pos=&quot;e,177.35,317.32 217.61,415.76 171.64,412.2 99.24,403.44 82.5,383 72.363,370.62 72.643,359.6 82.5,347 93.142,333.39 132.76,324.33 \
167.31,318.84&quot;,
		target=_top];
	pex	 [fillcolor=&quot;#FFD8DF&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/sss_pca_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-extra-proj.fif&lt;/FONT&gt;&gt;,
		pos=&quot;290.5,365&quot;,
		style=filled,
		width=1.2778];
	sss -&gt; pex	 [fontsize=10,
		pos=&quot;e,278.89,383.09 268.2,399.76 269.88,397.15 271.63,394.42 273.38,391.69&quot;];
	aan -&gt; sss	 [fontsize=10,
		pos=&quot;e,232.6,436.09 210.59,452.76 215.04,449.39 219.75,445.83 224.39,442.31&quot;];
	bad -&gt; pca	 [fontsize=10,
		pos=&quot;e,196.45,267.09 177.56,346.7 169.51,331.87 161.8,310.76 170.5,294 174.64,286.03 180.91,279.17 187.94,273.39&quot;];
	bad -&gt; pro	 [fontsize=10,
		pos=&quot;e,211.89,330.09 201.2,346.76 202.88,344.15 204.63,341.42 206.38,338.69&quot;];
	pca -&gt; evo	 [URL=&quot;../overview.html#write-epochs&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;7. write_epochs&lt;/B&gt;&gt;,
		labeltooltip=&quot;7. write_epochs&quot;,
		lp=&quot;190,217.5&quot;,
		pos=&quot;e,129.86,204.22 182.97,239.99 170.27,236.16 157.24,230.71 146.5,223 142.49,220.12 138.87,216.42 135.71,212.47&quot;,
		target=_top];
	pca -&gt; fwd	 [fontsize=10,
		pos=&quot;e,323.24,204.13 286.26,230.86 291.21,228.47 296.03,225.85 300.5,223 305.74,219.66 310.9,215.55 315.66,211.3&quot;];
	cov	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/cov/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-cov.fif&lt;/FONT&gt;&gt;,
		pos=&quot;237.5,186&quot;,
		style=filled,
		width=0.84722];
	pca -&gt; cov	 [URL=&quot;../overview.html#gen-covs&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;8. gen_covs&lt;/B&gt;&gt;,
		labeltooltip=&quot;8. gen_covs&quot;,
		lp=&quot;269,217.5&quot;,
		pos=&quot;e,236.62,204.4 235.37,230.78 235.61,225.73 235.88,220.12 236.14,214.63&quot;,
		target=_top];
	pro -&gt; pca	 [URL=&quot;../overview.html#apply-ssp&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;6. apply_ssp&lt;/B&gt;&gt;,
		labeltooltip=&quot;6. apply_ssp&quot;,
		lp=&quot;256.5,280.5&quot;,
		pos=&quot;e,224.95,267.12 221.27,293.77 221.06,289.43 221.11,284.75 222.55,277.29&quot;,
		target=_top];
	pex -&gt; pca	 [fontsize=10,
		pos=&quot;e,282.95,267.35 295.56,346.84 299.85,327.44 303.33,296.57 289.5,275 289.44,274.91 289.39,274.82 289.33,274.73&quot;];
	pex -&gt; pro	 [fontsize=10,
		pos=&quot;e,246.37,330.09 267.44,346.76 263.18,343.39 258.68,339.83 254.23,336.31&quot;];
	cov -&gt; htm	 [fontsize=10,
		pos=&quot;e,234.01,62.203 236.99,167.73 236.3,143.55 235.1,100.69 234.3,72.303&quot;];
	cov -&gt; inv	 [fontsize=10,
		pos=&quot;e,277.85,141.4 253.99,167.78 259.26,161.95 265.2,155.38 270.88,149.11&quot;];
	acq	 [fillcolor=&quot;#CCBB44&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;user&#64;minea&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_raw.fif&lt;/FONT&gt;&gt;,
		pos=&quot;245.5,851&quot;,
		style=filled,
		width=0.94444];
	raw	 [fillcolor=&quot;#66CCEE&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/raw_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*_raw.fif&lt;/FONT&gt;&gt;,
		pos=&quot;245.5,788&quot;,
		style=filled,
		width=1.0417];
	acq -&gt; raw	 [URL=&quot;../overview.html#fetch-raw&quot;,
		fontsize=10,
		label=&lt;&lt;B&gt;1. fetch_raw&lt;/B&gt;&gt;,
		labeltooltip=&quot;1. fetch_raw&quot;,
		lp=&quot;280,819.5&quot;,
		pos=&quot;e,245.5,806.4 245.5,832.78 245.5,827.73 245.5,822.12 245.5,816.63&quot;,
		target=_top];
	raw -&gt; sco	 [fontsize=10,
		pos=&quot;e,88.732,709.23 207.77,783.77 187.36,780.22 162.34,773.75 142.5,762 123.56,750.79 106.75,732.5 94.831,717.29&quot;];
	raw -&gt; pbd	 [fontsize=10,
		pos=&quot;e,245.5,753.09 245.5,769.76 245.5,767.66 245.5,765.47 245.5,763.27&quot;];
	raw -&gt; mfb	 [fontsize=10,
		pos=&quot;e,166.22,665.11 217.22,769.81 198.56,755.83 176.03,734.6 167.5,709 163.95,698.34 163.79,686.08 164.84,675.29&quot;];
	raw -&gt; sss	 [fontsize=10,
		pos=&quot;e,285.57,436.12 283.16,769.91 295.21,761.35 305.5,749.73 305.5,735 305.5,735 305.5,735 305.5,471 305.5,460.47 300.22,451.15 293.14,\
443.37&quot;];
	can	 [fillcolor=&quot;#FFD8DF&quot;,
		fontcolor=&quot;#000000&quot;,
		height=0.5,
		label=&lt;&lt;FONT POINT-SIZE=&quot;8&quot;&gt;./SUBJ/raw_fif/&lt;/FONT&gt;&lt;BR/&gt;&lt;FONT POINT-SIZE=&quot;10&quot;&gt;*-custom-annot.fif&lt;/FONT&gt;&gt;,
		pos=&quot;370.5,515&quot;,
		style=filled,
		width=1.4444];
	raw -&gt; can	 [fontsize=10,
		pos=&quot;e,364.51,533.32 283.22,776.97 314.03,766.8 352.5,750.91 352.5,735 352.5,735 352.5,735 352.5,603 352.5,582.73 357.14,560.35 361.71,\
543.23&quot;];
	can -&gt; sss	 [fontsize=10,
		pos=&quot;e,295.28,431.32 360.37,496.87 350.8,481.12 335.15,458.62 316.5,444 312.73,441.05 308.58,438.36 304.27,435.94&quot;];
}</p></object></div>
</div>
<div class="section" id="running-parameters">
<h2><a class="toc-backref" href="#id5">Running parameters</a><a class="headerlink" href="#running-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-general-options">
<h3><a class="toc-backref" href="#id6"><code class="docutils literal notranslate"><span class="pre">general</span></code>: General options</a><a class="headerlink" href="#general-general-options" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>work_dir<span class="classifier">str</span></dt><dd><p>Working directory, usually “.”.</p>
</dd>
<dt>subjects_dir<span class="classifier">str</span></dt><dd><p>Directory containing the structurals.</p>
</dd>
<dt>subject_indices<span class="classifier">list</span></dt><dd><p>Which subjects to process.</p>
</dd>
<dt>disp_files<span class="classifier">bool</span></dt><dd><p>Display status.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="fetch-raw">
<h2><a class="toc-backref" href="#id7">1. fetch_raw</a><a class="headerlink" href="#fetch-raw" title="Permalink to this headline">¶</a></h2>
<p>Fetch raw files from an acquisition machine.</p>
<div class="section" id="fetch-raw-raw-fetching-parameters">
<h3><a class="toc-backref" href="#id8"><code class="docutils literal notranslate"><span class="pre">fetch_raw</span></code>: Raw fetching parameters</a><a class="headerlink" href="#fetch-raw-raw-fetching-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>subjects<span class="classifier">list of str</span></dt><dd><p>Subject names.</p>
</dd>
<dt>structurals<span class="classifier">list of str</span></dt><dd><p>List of subject structurals.</p>
</dd>
<dt>dates<span class="classifier">list of tuple or None</span></dt><dd><p>Dates to use for anonymization. Use “None” to more fully anonymize.</p>
</dd>
<dt>acq_ssh<span class="classifier">str</span></dt><dd><p>The acquisition machine SSH name.</p>
</dd>
<dt>acq_dir<span class="classifier">list of str</span></dt><dd><p>List of paths to search and fetch raw data.</p>
</dd>
<dt>acq_port<span class="classifier">int</span></dt><dd><p>Acquisition port.</p>
</dd>
<dt>run_names<span class="classifier">list of str</span></dt><dd><p>Run names for the paradigm.</p>
</dd>
<dt>runs_empty<span class="classifier">list of str</span></dt><dd><p>Empty room run names.</p>
</dd>
<dt>subject_run_indices<span class="classifier">list of array-like | None</span></dt><dd><p>Run indices to include for each subject. This can be a list
(must be same length as <code class="docutils literal notranslate"><span class="pre">params.subjects</span></code>) or a dict (keys are subject
strings, values are the run indices) including a defaultdict. None is an
alias for “all runs”.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="do-score">
<h2><a class="toc-backref" href="#id9">2. do_score</a><a class="headerlink" href="#do-score" title="Permalink to this headline">¶</a></h2>
<p>Do the scoring. This converts TTL triggers to meaningful events.</p>
<div class="section" id="scoring-scoring-parameters">
<h3><a class="toc-backref" href="#id10"><code class="docutils literal notranslate"><span class="pre">scoring</span></code>: Scoring parameters</a><a class="headerlink" href="#scoring-scoring-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>score<span class="classifier">callable | None</span></dt><dd><p>Scoring function used to slice data into trials.</p>
</dd>
<dt>on_process<span class="classifier">callable</span></dt><dd><p>Called at each processing step.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="do-sss">
<span id="id2"></span><h2><a class="toc-backref" href="#id11">3. do_sss</a><a class="headerlink" href="#do-sss" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before running SSS, make <code class="docutils literal notranslate"><span class="pre">SUBJ/raw_fif/SUBJ_prebad.txt</span></code>
with space-separated list of bad MEG channel numbers.
Using <code class="docutils literal notranslate"><span class="pre">p.mf_autobad=True</span></code> can help fill in missed bad channels,
but is not as reliable as experienced analyst inspection.</p>
</div>
<p>Run SSS processing. This will:</p>
<ol class="arabic simple">
<li><p>Copy each raw file to the SSS workstation.</p></li>
<li><p>Automatically determine bad channels (only if <code class="docutils literal notranslate"><span class="pre">mf_autobad=True</span></code>)</p></li>
<li><p>Estimate head positions (remotely if <code class="docutils literal notranslate"><span class="pre">hp_type='maxwell'</span></code>, otherwise
locally), see <a class="reference internal" href="#preprocessing-hpe"><span class="std std-ref">preprocessing: head_position_estimation: Head position estimation parameters</span></a>.</p></li>
<li><p>Copy the head positions to the local machine.</p></li>
<li><p>Delete generated files from the remote machine.</p></li>
<li><p>Annotate bad segments automatically, see <a class="reference internal" href="#preprocessing-annotations"><span class="std std-ref">preprocessing: annotations: Annotation parameters</span></a>.</p></li>
<li><p>Add any custom annotations (e.g., for segments that operators want to
manually mark as bad) that have been saved as <code class="docutils literal notranslate"><span class="pre">FILENAME-custom-annot.fif</span></code>.</p></li>
<li><p>Run SSS processing locally using <a class="reference external" href="https://mne.tools/dev/generated/mne.preprocessing.maxwell_filter.html#mne.preprocessing.maxwell_filter" title="(in MNE v0.21.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.preprocessing.maxwell_filter()</span></code></a>.</p></li>
</ol>
<p>The addition of annotations <em>before</em> SSS ensures that tSSS operations are not
disrupted by bad segments of data, and also ensures that the output files
have the annotations (as they are preserved by <code class="docutils literal notranslate"><span class="pre">mnefun</span></code>).</p>
<div class="section" id="preprocessing-multithreading-multithreading-parameters">
<h3><a class="toc-backref" href="#id12"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">multithreading</span></code>: Multithreading parameters</a><a class="headerlink" href="#preprocessing-multithreading-multithreading-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>n_jobs<span class="classifier">int</span></dt><dd><p>Number of jobs to use in parallel operations.</p>
</dd>
<dt>n_jobs_mkl<span class="classifier">int</span></dt><dd><p>Number of jobs to spawn in parallel for operations that can make
use of MKL threading. If Numpy/Scipy has been compiled with MKL
support, it is best to leave this at 1 or 2 since MKL will
automatically spawn threads. Otherwise, n_cpu is a good choice.</p>
</dd>
<dt>n_jobs_fir<span class="classifier">int | str</span></dt><dd><p>Number of threads to use for FIR filtering. Can also be ‘cuda’
if the system supports CUDA.</p>
</dd>
<dt>n_jobs_resample<span class="classifier">int | str</span></dt><dd><p>Number of threads to use for resampling. Can also be ‘cuda’
if the system supports CUDA.</p>
</dd>
</dl>
</div>
<div class="section" id="preprocessing-pre-sss-bads-automatic-bad-channel-detection">
<h3><a class="toc-backref" href="#id13"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">pre-SSS</span> <span class="pre">bads</span></code>: Automatic bad channel detection</a><a class="headerlink" href="#preprocessing-pre-sss-bads-automatic-bad-channel-detection" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>mf_autobad<span class="classifier">bool</span></dt><dd><p>Default False. If True use Maxwell-filtering-based automatic bad
channel detection to mark bad channels <em>prior to SSS</em>.</p>
</dd>
<dt>mf_autobad_type<span class="classifier">str</span></dt><dd><p>Default ‘maxwell’. If ‘maxwell’, use MaxFilter to do automatic detection,
if ‘python’ (preferred) use MNE-Python.</p>
</dd>
<dt>mf_badlimit<span class="classifier">int</span></dt><dd><p>MaxFilter threshold for noisy channel detection (default is 7).</p>
</dd>
</dl>
</div>
<div class="section" id="preprocessing-head-position-estimation-head-position-estimation-parameters">
<span id="preprocessing-hpe"></span><h3><a class="toc-backref" href="#id14"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">head_position_estimation</span></code>: Head position estimation parameters</a><a class="headerlink" href="#preprocessing-head-position-estimation-head-position-estimation-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>coil_t_window<span class="classifier">float</span></dt><dd><p>Time window for coil position estimation.</p>
</dd>
<dt>coil_t_step_min<span class="classifier">float</span></dt><dd><p>Coil step min for head / cHPI coil position estimation.</p>
</dd>
<dt>coil_dist_limit<span class="classifier">float</span></dt><dd><p>Dist limit for coils.</p>
</dd>
<dt>coil_gof_limit<span class="classifier">float</span></dt><dd><p>Goodness of fit limit for coils.</p>
</dd>
</dl>
</div>
<div class="section" id="preprocessing-annotations-annotation-parameters">
<span id="preprocessing-annotations"></span><h3><a class="toc-backref" href="#id15"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">annotations</span></code>: Annotation parameters</a><a class="headerlink" href="#preprocessing-annotations-annotation-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>coil_bad_count_duration_limit<span class="classifier">float</span></dt><dd><p>Remove segments with &lt; 3 good coils for at least this many sec.</p>
</dd>
<dt>rotation_limit<span class="classifier">float</span></dt><dd><p>Rotation limit (deg/s) for annotating bad segments.</p>
</dd>
<dt>translation_limit<span class="classifier">float</span></dt><dd><p>Head translation limit (m/s) for annotating bad segments.</p>
</dd>
</dl>
</div>
<div class="section" id="preprocessing-sss-sss-parameters">
<h3><a class="toc-backref" href="#id16"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">sss</span></code>: SSS parameters</a><a class="headerlink" href="#preprocessing-sss-sss-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>movecomp<span class="classifier">str | None</span></dt><dd><p>Movement compensation to use. Can be ‘inter’ or None.</p>
</dd>
<dt>hp_type<span class="classifier">str</span></dt><dd><p>Head position estimation method. Must be either ‘maxfilter’ or ‘python’.</p>
</dd>
<dt>sss_type<span class="classifier">str</span></dt><dd><p>Signal space separation method. Must be either ‘maxfilter’ or ‘python’.</p>
</dd>
<dt>int_order<span class="classifier">int</span></dt><dd><p>Order of internal component of spherical expansion. Default is 8.
Value of 6 recomended for infant data.</p>
</dd>
<dt>ext_order<span class="classifier">int</span></dt><dd><p>Order of external component of spherical expansion. Default is 3.</p>
</dd>
<dt>sss_regularize<span class="classifier">str</span></dt><dd><p>SSS regularization, usually “in”.</p>
</dd>
<dt>tsss_dur<span class="classifier">float | None</span></dt><dd><p>Buffer length (in seconds) fpr Spatiotemporal SSS. Default is 60.
however based on system specification a shorter buffer may be
appropriate. For data containing excessive head movements e.g. young
children a buffer size of 4s is recommended.</p>
</dd>
<dt>st_correlation<span class="classifier">float</span></dt><dd><p>Correlation limit between inner and outer subspaces used to reject
ovwrlapping intersecting inner/outer signals during spatiotemporal SSS.
Default is .98 however a smaller value of .9 is recommended for infant/
child data.</p>
</dd>
<dt>filter_chpi<span class="classifier">str</span></dt><dd><p>Filter cHPI signals before SSS.</p>
</dd>
<dt>trans_to<span class="classifier">str | array-like, (3,) | None</span></dt><dd><p>The destination location for the head. Can be:</p>
<ul class="simple">
<li><dl class="simple">
<dt>‘median’ (default)</dt><dd><p>Median (across runs) of the starting head positions.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>‘twa’</dt><dd><p>Time-weighted average head position.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><p>Will not change the head position.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>str</dt><dd><p>Path to a FIF file containing a MEG device to head transformation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>array-like</dt><dd><p>First three elements are coordinates to translate to.
An optional fourth element gives the x-axis rotation (e.g., -30 means
a backward 30° rotation).</p>
</dd>
</dl>
</li>
</ul>
</dd>
<dt>sss_origin<span class="classifier">array-like, shape (3,) | str</span></dt><dd><p>Origin of internal and external multipolar moment space in meters.
Default is center of sphere fit to digitized head points.</p>
</dd>
<dt>dig_with_eeg<span class="classifier">bool</span></dt><dd><p>If True, include EEG points in estimating the head origin.</p>
</dd>
<dt>ct_file<span class="classifier">str</span></dt><dd><p>Cross-talk file, usually “uw” to auto-load the UW file.</p>
</dd>
<dt>cal_file<span class="classifier">str</span></dt><dd><p>Calibration file, usually “uw” to auto-load the UW file.</p>
</dd>
<dt>sss_format<span class="classifier">str</span></dt><dd><p>Deprecated. SSS numerical format when using MaxFilter.</p>
</dd>
<dt>mf_args<span class="classifier">str</span></dt><dd><p>Deprecated. Extra arguments for MF SSS.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="do-ch-fix">
<h2><a class="toc-backref" href="#id17">4. do_ch_fix</a><a class="headerlink" href="#do-ch-fix" title="Permalink to this headline">¶</a></h2>
<p>Fix EEG channel ordering, and also anonymize files.</p>
</div>
<div class="section" id="gen-ssp">
<h2><a class="toc-backref" href="#id18">5. gen_ssp</a><a class="headerlink" href="#gen-ssp" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before running SSP, examine SSS’ed files and make
<code class="docutils literal notranslate"><span class="pre">SUBJ/bads/bad_ch_SUBJ_post-sss.txt</span></code>; usually, this should only
contain EEG channels. Alternatively, you can use
<code class="docutils literal notranslate"><span class="pre">params.auto_bad</span> <span class="pre">=</span> <span class="pre">some_float</span></code>, see
<a class="reference internal" href="#preprocessing-auto-bads"><span class="std std-ref">preprocessing: post-SSS bads: Marking bad channels during SSP</span></a>.</p>
</div>
<p>Generate SSP vectors. If additional projectors are required (e.g., to get
rid of muscle movement artifacts in a verbal response paradigm), you can use
<code class="docutils literal notranslate"><span class="pre">p.proj_extra</span></code>, which get applied before any other projectors are computed
(e.g., ECG, blink).</p>
<div class="section" id="preprocessing-filtering-filtering-parameters">
<h3><a class="toc-backref" href="#id19"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">filtering</span></code>: Filtering parameters</a><a class="headerlink" href="#preprocessing-filtering-filtering-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>hp_cut<span class="classifier">float | None</span></dt><dd><p>Highpass cutoff in Hz. Use None for no highpassing.</p>
</dd>
<dt>hp_trans<span class="classifier">float</span></dt><dd><p>High-pass transition band.</p>
</dd>
<dt>lp_cut<span class="classifier">float</span></dt><dd><p>Cutoff for lowpass filtering.</p>
</dd>
<dt>lp_trans<span class="classifier">float</span></dt><dd><p>Low-pass transition band.</p>
</dd>
<dt>filter_length<span class="classifier">int | str</span></dt><dd><p>See <a class="reference external" href="https://mne.tools/dev/generated/mne.filter.create_filter.html#mne.filter.create_filter" title="(in MNE v0.21.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.filter.create_filter()</span></code></a>.</p>
</dd>
<dt>fir_design<span class="classifier">str</span></dt><dd><p>See <a class="reference external" href="https://mne.tools/dev/generated/mne.filter.create_filter.html#mne.filter.create_filter" title="(in MNE v0.21.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.filter.create_filter()</span></code></a>.</p>
</dd>
<dt>fir_window<span class="classifier">str</span></dt><dd><p>See <a class="reference external" href="https://mne.tools/dev/generated/mne.filter.create_filter.html#mne.filter.create_filter" title="(in MNE v0.21.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.filter.create_filter()</span></code></a>.</p>
</dd>
<dt>phase<span class="classifier">str</span></dt><dd><p>See <a class="reference external" href="https://mne.tools/dev/generated/mne.filter.create_filter.html#mne.filter.create_filter" title="(in MNE v0.21.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.filter.create_filter()</span></code></a>.</p>
</dd>
</dl>
</div>
<div class="section" id="preprocessing-post-sss-bads-marking-bad-channels-during-ssp">
<span id="preprocessing-auto-bads"></span><h3><a class="toc-backref" href="#id20"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">post-SSS</span> <span class="pre">bads</span></code>: Marking bad channels during SSP</a><a class="headerlink" href="#preprocessing-post-sss-bads-marking-bad-channels-during-ssp" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>auto_bad<span class="classifier">float | None</span></dt><dd><p>If not None, bad channels will be automatically excluded after SSS if
they disqualify a proportion of events exceeding <code class="docutils literal notranslate"><span class="pre">auto_bad</span></code>.
This does not require the autoreject module.</p>
</dd>
<dt>auto_bad_reject<span class="classifier">str | dict | None</span></dt><dd><p>Default is None. Must be defined if using Autoreject module to
compute noisy sensor rejection criteria. Set to ‘auto’ to compute
criteria automatically, or dictionary of channel keys and amplitude
values e.g., dict(grad=1500e-13, mag=5000e-15, eeg=150e-6) to define
rejection threshold(s). See
<a class="reference external" href="http://autoreject.github.io/">http://autoreject.github.io/</a> for details.</p>
</dd>
<dt>auto_bad_flat<span class="classifier">dict | None</span></dt><dd><p>Flat threshold for auto bad.</p>
</dd>
<dt>auto_bad_eeg_thresh<span class="classifier">float | None</span></dt><dd><p>If more than this proportion of EEG channels is automatically marked bad,
an error will be raised. This helps ensure that not too many channels
are marked as bad.</p>
</dd>
<dt>auto_bad_meg_thresh<span class="classifier">float | None</span></dt><dd><p>Same as above but for MEG.</p>
</dd>
</dl>
</div>
<div class="section" id="preprocessing-ssp-ssp-creation-parameters">
<h3><a class="toc-backref" href="#id21"><code class="docutils literal notranslate"><span class="pre">preprocessing:</span> <span class="pre">ssp</span></code>: SSP creation parameters</a><a class="headerlink" href="#preprocessing-ssp-ssp-creation-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>proj_nums<span class="classifier">list | dict</span></dt><dd><p>List of projector counts to use for ECG/EOG/ERM; each list contains
three values for grad/mag/eeg channels.
Can be a dict that maps subject names to projector counts to use.</p>
</dd>
<dt>proj_sfreq<span class="classifier">float | None</span></dt><dd><p>The sample freq to use for calculating projectors. Useful since
time points are not independent following low-pass. Also saves
computation to downsample.</p>
</dd>
<dt>proj_meg<span class="classifier">str</span></dt><dd><p>Can be “separate” (default for backward compat) or “combined”
(should be better for SSS’ed data).</p>
</dd>
<dt>drop_thresh<span class="classifier">float</span></dt><dd><p>The percentage threshold to use when deciding whether or not to
plot Epochs drop_log.</p>
</dd>
<dt>plot_raw<span class="classifier">bool</span></dt><dd><p>If True, plot the raw files with the ECG/EOG events overlaid.</p>
</dd>
<dt>ssp_eog_reject<span class="classifier">dict | None</span></dt><dd><p>Amplitude rejection criteria for EOG SSP computation. None will
use the mne-python default.</p>
</dd>
<dt>ssp_ecg_reject<span class="classifier">dict | None</span></dt><dd><p>Amplitude rejection criteria for ECG SSP computation. None will
use the mne-python default.</p>
</dd>
<dt>eog_channel<span class="classifier">str | dict | None</span></dt><dd><p>The channel to use to detect EOG events. None will use EOG* channels.
In lieu of an EOG recording, MEG1411 may work.</p>
</dd>
<dt>ecg_channel<span class="classifier">str | dict | None</span></dt><dd><p>The channel to use to detect ECG events. None will use ECG063.
In lieu of an ECG recording, MEG1531 may work.
Can be a dict that maps subject names to channels.</p>
</dd>
<dt>eog_t_lims<span class="classifier">tuple</span></dt><dd><p>The time limits for EOG calculation. Default (-0.25, 0.25).</p>
</dd>
<dt>ecg_t_lims<span class="classifier">tuple</span></dt><dd><p>The time limits for ECG calculation. Default(-0.08, 0.08).</p>
</dd>
<dt>eog_f_lims<span class="classifier">tuple</span></dt><dd><p>Band-pass limits for EOG detection and calculation. Default (0, 2).</p>
</dd>
<dt>ecg_f_lims<span class="classifier">tuple</span></dt><dd><p>Band-pass limits for ECG detection and calculation. Default (5, 35).</p>
</dd>
<dt>eog_thresh<span class="classifier">float | dict | None</span></dt><dd><p>Threshold for EOG detection. Can vary per subject.</p>
</dd>
<dt>proj_ave<span class="classifier">bool</span></dt><dd><p>If True, average artifact epochs before computing proj.</p>
</dd>
<dt>proj_extra<span class="classifier">str | None</span></dt><dd><p>Extra projector filename to load for each subject, e.g.
<code class="docutils literal notranslate"><span class="pre">extra-proj.fif</span></code> will load <code class="docutils literal notranslate"><span class="pre">SUBJ/sss_pca_fif/extra-proj.fif</span></code>.</p>
</dd>
<dt>get_projs_from<span class="classifier">list of int</span></dt><dd><p>Indices for runs to get projects from.</p>
</dd>
<dt>cont_lp<span class="classifier">float</span></dt><dd><p>Lowpass to use for continuous ERM projectors.</p>
</dd>
<dt>plot_drop_logs<span class="classifier">bool</span></dt><dd><p>If True, plot drop logs after preprocessing.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="apply-ssp">
<h2><a class="toc-backref" href="#id22">6. apply_ssp</a><a class="headerlink" href="#apply-ssp" title="Permalink to this headline">¶</a></h2>
<p>Apply SSP vectors and filtering to the files.</p>
</div>
<div class="section" id="write-epochs">
<h2><a class="toc-backref" href="#id23">7. write_epochs</a><a class="headerlink" href="#write-epochs" title="Permalink to this headline">¶</a></h2>
<p>Write epochs to disk.</p>
<div class="section" id="epoching-epoching-parameters">
<h3><a class="toc-backref" href="#id24"><code class="docutils literal notranslate"><span class="pre">epoching</span></code>: Epoching parameters</a><a class="headerlink" href="#epoching-epoching-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>tmin<span class="classifier">float</span></dt><dd><p>tmin for events.</p>
</dd>
<dt>tmax<span class="classifier">float</span></dt><dd><p>tmax for events.</p>
</dd>
<dt>t_adjust<span class="classifier">float</span></dt><dd><p>Adjustment for delays (e.g., -4e-3 compensates for a 4 ms delay
in the trigger.</p>
</dd>
<dt>baseline<span class="classifier">tuple | None | str</span></dt><dd><p>Baseline to use. If “individual”, use <code class="docutils literal notranslate"><span class="pre">params.bmin</span></code> and
<code class="docutils literal notranslate"><span class="pre">params.bmax</span></code>, otherwise pass as the baseline parameter to
mne-python Epochs. <code class="docutils literal notranslate"><span class="pre">params.bmin</span></code> and <code class="docutils literal notranslate"><span class="pre">params.bmax</span></code> will always
be used for covariance calculation. This is useful e.g. when using
a high-pass filter and no baselining is desired (but evoked
covariances should still be calculated from the baseline period).</p>
</dd>
<dt>bmin<span class="classifier">float</span></dt><dd><p>Lower limit for baseline compensation.</p>
</dd>
<dt>bmax<span class="classifier">float</span></dt><dd><p>Upper limit for baseline compensation.</p>
</dd>
<dt>decim<span class="classifier">int</span></dt><dd><p>Amount to decimate the data after filtering when epoching data
(e.g., a factor of 5 on 1000 Hz data yields 200 Hz data).</p>
</dd>
<dt>epochs_type<span class="classifier">str | list</span></dt><dd><p>Can be ‘fif’, ‘mat’, or a list containing both.</p>
</dd>
<dt>match_fun<span class="classifier">callable | None</span></dt><dd><p>If None, standard matching will be performed. If a function,
must_match will be ignored, and <code class="docutils literal notranslate"><span class="pre">match_fun</span></code> will be called
to equalize event counts.</p>
</dd>
<dt>reject<span class="classifier">dict</span></dt><dd><p>Rejection parameters for epochs.</p>
</dd>
<dt>flat<span class="classifier">dict</span></dt><dd><p>Flat thresholds for epoch rejection.</p>
</dd>
<dt>reject_tmin<span class="classifier">float | None</span></dt><dd><p>Reject minimum time to use when epoching. None will use <code class="docutils literal notranslate"><span class="pre">tmin</span></code>.</p>
</dd>
<dt>reject_tmax<span class="classifier">float | None</span></dt><dd><p>Reject maximum time to use when epoching. None will use <code class="docutils literal notranslate"><span class="pre">tmax</span></code>.</p>
</dd>
<dt>on_missing<span class="classifier">string</span></dt><dd><p>Can set to ‘error’ | ‘warning’ | ‘ignore’. Default is ‘error’.
Determine what to do if one or several event ids are not found in the
recording during epoching. See mne.Epochs docstring for further
details.</p>
</dd>
<dt>autoreject_thresholds<span class="classifier">bool | False</span></dt><dd><p>If True use autoreject module to compute global rejection thresholds
for epoching. Make sure autoreject module is installed. See
<a class="reference external" href="http://autoreject.github.io/">http://autoreject.github.io/</a> for instructions.</p>
</dd>
<dt>autoreject_types<span class="classifier">tuple</span></dt><dd><p>Default is (‘mag’, ‘grad’, ‘eeg’). Can set to (‘mag’, ‘grad’, ‘eeg’,
‘eog) to use EOG channel rejection criterion from autoreject module to
reject trials on basis of EOG.</p>
</dd>
<dt>reject_epochs_by_annot<span class="classifier">bool</span></dt><dd><p>If True, reject epochs by BAD annotations.</p>
</dd>
<dt>analyses<span class="classifier">list of str</span></dt><dd><p>Lists of analyses of interest.</p>
</dd>
<dt>in_names<span class="classifier">list of str</span></dt><dd><p>Names of input events.</p>
</dd>
<dt>in_numbers<span class="classifier">list of list of int</span></dt><dd><p>Event numbers (in scored event files) associated with each name.</p>
</dd>
<dt>out_names<span class="classifier">list of list of str</span></dt><dd><p>Event types to make out of old ones.</p>
</dd>
<dt>out_numbers<span class="classifier">list of list of int</span></dt><dd><p>Event numbers to convert to (e.g., [[1, 1, 2, 3, 3], …] would create
three event types, where the first two and last two event types from
the original list get collapsed over).</p>
</dd>
<dt>must_match<span class="classifier">list of int</span></dt><dd><p>Indices from the original in_names that must match in event counts
before collapsing. Should eventually be expanded to allow for
ratio-based collapsing.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="gen-covs">
<h2><a class="toc-backref" href="#id25">8. gen_covs</a><a class="headerlink" href="#gen-covs" title="Permalink to this headline">¶</a></h2>
<p>Generate covariances.</p>
<div class="section" id="covariance-covariance-parameters">
<h3><a class="toc-backref" href="#id26"><code class="docutils literal notranslate"><span class="pre">covariance</span></code>: Covariance parameters</a><a class="headerlink" href="#covariance-covariance-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>cov_method<span class="classifier">str</span></dt><dd><p>Covariance calculation method.</p>
</dd>
<dt>compute_rank<span class="classifier">bool</span></dt><dd><p>Default is False. Set to True to compute rank of the noise covariance
matrix during inverse kernel computation.</p>
</dd>
<dt>pick_events_cov<span class="classifier">callable | None</span></dt><dd><p>Function for picking covariance events.</p>
</dd>
<dt>cov_rank<span class="classifier">str | int</span></dt><dd><p>Cov rank to use, usually “auto”.</p>
</dd>
<dt>cov_rank_tol<span class="classifier">float</span></dt><dd><p>Tolerance for covariance rank computation.</p>
</dd>
<dt>force_erm_cov_rank_full<span class="classifier">bool</span></dt><dd><p>If True, force the ERM cov to be full rank.
Usually not needed, but might help when the empty-room data
is short and/or there are a lot of head movements.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="gen-fwd">
<h2><a class="toc-backref" href="#id27">9. gen_fwd</a><a class="headerlink" href="#gen-fwd" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make SUBJ/trans/SUBJ-trans.fif using <a class="reference external" href="https://mne.tools/dev/generated/commands.html#gen-mne-coreg" title="(in MNE v0.21.dev0)"><span>mne coreg</span></a>.</p>
</div>
<p>Generate forward solutions (and source space if necessary).</p>
<div class="section" id="forward-forward-parameters">
<h3><a class="toc-backref" href="#id28"><code class="docutils literal notranslate"><span class="pre">forward</span></code>: Forward parameters</a><a class="headerlink" href="#forward-forward-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>bem_type<span class="classifier">str</span></dt><dd><p>Defaults to <code class="docutils literal notranslate"><span class="pre">'5120-5120-5120'</span></code>, use <code class="docutils literal notranslate"><span class="pre">'5120'</span></code> for a
single-layer BEM.</p>
</dd>
<dt>src<span class="classifier">str | dict</span></dt><dd><p>Can start be:</p>
<ul class="simple">
<li><p>‘oct6’ to use a surface source space decimated using the 6th
(or another integer) subdivision of an octahedron, or</p></li>
<li><p>‘vol5’ to use a volumetric grid source space with 5mm (or another
integer) spacing</p></li>
</ul>
</dd>
<dt>src_pos<span class="classifier">float</span></dt><dd><p>Default is 7 mm. Defines source grid spacing for volumetric source
space.</p>
</dd>
<dt>fwd_mindist<span class="classifier">float</span></dt><dd><p>Minimum distance (mm) for sources in the brain from the skull in order
for them to be included in the forward solution source space.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="gen-inv">
<h2><a class="toc-backref" href="#id29">10. gen_inv</a><a class="headerlink" href="#gen-inv" title="Permalink to this headline">¶</a></h2>
<p>Generate inverses.</p>
<div class="section" id="inverse-inverse-parameters">
<h3><a class="toc-backref" href="#id30"><code class="docutils literal notranslate"><span class="pre">inverse</span></code>: Inverse parameters</a><a class="headerlink" href="#inverse-inverse-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>inv_names<span class="classifier">list of str</span></dt><dd><p>Inverse names to use.</p>
</dd>
<dt>inv_runs<span class="classifier">list of int</span></dt><dd><p>Runs to use for each inverse.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="gen-report">
<h2><a class="toc-backref" href="#id31">11. gen_report</a><a class="headerlink" href="#gen-report" title="Permalink to this headline">¶</a></h2>
<p>Write <a class="reference external" href="https://mne.tools/dev/generated/mne.Report.html#mne.report" title="(in MNE v0.21.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Report</span></code></a> HTML of results to disk.</p>
<div class="section" id="report-params-report-parameters">
<h3><a class="toc-backref" href="#id32"><code class="docutils literal notranslate"><span class="pre">report_params</span></code>: Report parameters</a><a class="headerlink" href="#report-params-report-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>chpi_snr<span class="classifier">bool</span></dt><dd><p>cHPI SNR (default True).</p>
</dd>
<dt>good_hpi_count<span class="classifier">bool</span></dt><dd><p>Number of good HPI coils (default True).</p>
</dd>
<dt>head_movement<span class="classifier">bool</span></dt><dd><p>Head movement (default True).</p>
</dd>
<dt>raw_segments<span class="classifier">bool</span></dt><dd><p>10 evenly spaced raw data segments (default True).</p>
</dd>
<dt>psd<span class="classifier">bool</span></dt><dd><p>Raw PSDs, often slow (default True).</p>
</dd>
<dt>ssp_topomaps<span class="classifier">bool</span></dt><dd><p>SSP topomaps (default True).</p>
</dd>
<dt>source_alignment<span class="classifier">bool</span></dt><dd><p>Source alignment (default True).</p>
</dd>
<dt>drop_log<span class="classifier">bool</span></dt><dd><p>Plot the epochs drop log (default True).</p>
</dd>
<dt>covariance<span class="classifier">bool</span></dt><dd><p>Covariance image and SVD plots.</p>
</dd>
<dt>bem<span class="classifier">bool</span></dt><dd><p>Plot the BEM.</p>
</dd>
<dt>snr<span class="classifier">dict</span></dt><dd><p>SNR plots, with keys ‘analysis’, ‘name’, and ‘inv’.</p>
</dd>
<dt>whitening<span class="classifier">dict</span></dt><dd><p>Whitening plots, with keys ‘analysis’, ‘name’, and ‘cov’.</p>
</dd>
<dt>sensor<span class="classifier">dict</span></dt><dd><p>Sensor topomaps, with keys ‘analysis’, ‘name’, and ‘times’.</p>
</dd>
<dt>source<span class="classifier">dict</span></dt><dd><p>Source plots, with keys ‘analysis’, ‘name’, ‘inv’, ‘times’, ‘views’,
and ‘size’.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="filename-standardization">
<h2><a class="toc-backref" href="#id33">Filename standardization</a><a class="headerlink" href="#filename-standardization" title="Permalink to this headline">¶</a></h2>
<p>mnefun imposes custom standardized structure on filenames:</p>
<div class="section" id="naming-file-naming-tags-and-folders">
<h3><a class="toc-backref" href="#id34"><code class="docutils literal notranslate"><span class="pre">naming</span></code>: File naming tags and folders</a><a class="headerlink" href="#naming-file-naming-tags-and-folders" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>list_dir<span class="classifier">str</span></dt><dd><p>Directory for event lists, usually “lists”.</p>
</dd>
<dt>bad_dir<span class="classifier">str</span></dt><dd><p>Directory to use for bad channels, usually “bads”.</p>
</dd>
<dt>bad_tag<span class="classifier">str</span></dt><dd><p>Tag for bid channel filename, usually “_post-sss.txt”.</p>
</dd>
<dt>raw_dir<span class="classifier">str</span></dt><dd><p>Raw directory, usually “raw_fif”.</p>
</dd>
<dt>keep_orig<span class="classifier">bool</span></dt><dd><p>Keep original files after anonymization.</p>
</dd>
<dt>raw_fif_tag<span class="classifier">str</span></dt><dd><p>File tag for raw data, usually “_raw.fif”.</p>
</dd>
<dt>sss_fif_tag<span class="classifier">str</span></dt><dd><p>File tag for SSS-processed files, usually “_raw_sss.fif”.</p>
</dd>
<dt>sss_dir<span class="classifier">str</span></dt><dd><p>Directory to use for SSS processed files, usually “sss_fif”.</p>
</dd>
<dt>pca_dir<span class="classifier">str</span></dt><dd><p>Directory for processed files, usually “sss_pca_fif”.</p>
</dd>
<dt>epochs_dir<span class="classifier">str</span></dt><dd><p>Directory for epochs, usually “epochs”.</p>
</dd>
<dt>epochs_prefix<span class="classifier">str</span></dt><dd><p>The prefix to use for the <code class="docutils literal notranslate"><span class="pre">-epo.fif</span></code> file.</p>
</dd>
<dt>epochs_tag<span class="classifier">str</span></dt><dd><p>Tag for epoochs, usually ‘-epo’.</p>
</dd>
<dt>eq_tag<span class="classifier">str</span></dt><dd><p>Tag for equalized data, usually “eq”.</p>
</dd>
<dt>cov_dir<span class="classifier">str</span></dt><dd><p>Directory to use for covariances, usually “covariance”.</p>
</dd>
<dt>forward_dir<span class="classifier">str</span></dt><dd><p>Directory for forward solutions, usually “forward”.</p>
</dd>
<dt>trans_dir<span class="classifier">str</span></dt><dd><p>Directory to use for trans files, usually “trans”.</p>
</dd>
<dt>inverse_dir<span class="classifier">str</span></dt><dd><p>Directory for storing inverses, usually “inverse”.</p>
</dd>
<dt>inv_tag<span class="classifier">str</span></dt><dd><p>Tag for all inverses, usually “-sss”.</p>
</dd>
<dt>inv_erm_tag<span class="classifier">str</span></dt><dd><p>Tag for ERM inverse, usually “-erm”.</p>
</dd>
<dt>inv_fixed_tag<span class="classifier">str</span></dt><dd><p>Tag for fixed inverse, usually “-fixed”.</p>
</dd>
<dt>inv_loose_tag<span class="classifier">str</span></dt><dd><p>Tag for loose inverse, usually “”.</p>
</dd>
<dt>inv_free_tag<span class="classifier">str</span></dt><dd><p>Tag for free orientation inverse, usually “-free”.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="preparing-your-machine-for-maxfilter-use">
<h2><a class="toc-backref" href="#id35">Preparing your machine for MaxFilter use</a><a class="headerlink" href="#preparing-your-machine-for-maxfilter-use" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Head position estimation and bad channel detection are now
available using <code class="docutils literal notranslate"><span class="pre">hp_type='python'</span></code> and
<code class="docutils literal notranslate"><span class="pre">mf_autobad_type='python</span></code>, respectively.
These are the preferred processing methods going forward
(as of March 2020), and using MaxFilter should be considered
deprecated.</p>
</div>
<p>Parameters for remotely connecting to SSS workstation (‘sws’) can be set
by adding a file <em class="xref py py-obj">json</em> with contents like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> mkdir ~/.mnefun
<span class="gp">$</span> <span class="nb">echo</span> <span class="s1">&#39;{&quot;sws_ssh&quot;:&quot;kasga&quot;, &quot;sws_dir&quot;:&quot;/data06/larsoner/sss_work&quot;, &quot;sws_port&quot;:22}&#39;</span> &gt; ~/.mnefun/mnefun.json
</pre></div>
</div>
<p>This should be preferred to the old way, which was to set in each script
when running on your machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">params</span><span class="o">.</span><span class="n">sws_ssh</span> <span class="o">=</span> <span class="s1">&#39;kasga&#39;</span>
<span class="n">params</span><span class="o">.</span><span class="n">sws_dir</span> <span class="o">=</span> <span class="s1">&#39;/data06/larsoner/sss_work&#39;</span>
</pre></div>
</div>
<p>Using per-machine config files rather than per-script variables should
help increase portability of scripts without hurting reproducibility
(assuming we all use the same version of MaxFilter, which should be a
safe assumption).</p>
<p>To test that things are configured correctly, you can do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python -c <span class="s2">&quot;import mnefun; mnefun.check_sws()&quot;</span>
<span class="go">On kasga: maxfilter -version (0 sec)</span>
<span class="go">Output:</span>
<span class="go">Revision: 2.2.15 Neuromag maxfilter Dec 11 2012 14:48:44</span>
</pre></div>
</div>
<p>If you get an error:</p>
<ol class="arabic">
<li><p>Ensure that your file is correctly set up in <code class="docutils literal notranslate"><span class="pre">~/.mnefun/mnefun.json</span></code>.
It needs to use standard quotation marks like <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>, not fancy ones like
<code class="docutils literal notranslate"><span class="pre">”</span></code> so ensure that your text editor (if you used one) did not use fancy
quotation marks.</p></li>
<li><p>Ensure that <code class="docutils literal notranslate"><span class="pre">maxwell_filter</span></code> is accessible as a command on the remote
machine. Log into the remote machine and do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> which maxfilter
<span class="go">/neuro/bin/util/maxfilter</span>
</pre></div>
</div>
<p>If you get no output with this command, it means that MaxFilter is not
available on your PATH on the remote machine. To fix this, consider adding
the following line to the end of your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> on the remote machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>:/neuro/bin/util:/neuro/bin/X11
</pre></div>
</div>
</li>
</ol>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013-2020, mnefun Developers.<br/>
      Last updated on Apr 02, 2020.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>